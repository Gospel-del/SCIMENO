export interface RevenuExploitation {
  idProjet : number;
  idRevenu  : number;
  idTypeRevenu : number;
  surfaceConcernee : number;
  loyer : number;
  periode : string;
  statut: boolean;
  created_at: string;
  updated_at: string;
}


export interface RevenuExploitationCreate {
  idProjet  : number;
  idTypeRevenu : number;
  surfaceConcernee : number;
  loyer : number;
  periode : string;
  statut: boolean;
  created_at: string;
  updated_at: string;
}

export interface RevenuExploitationUpdate {
  idProjet: number;
  idRevenu : number;
  idTypeRevenu : number;
  surfaceConcernee : number;
  loyer : number;
  periode : string;
  statut: boolean;
}

export interface RevenuExploitationResponse {
  idProjet: number;
  idRevenu : number;
  idTypeRevenu : number;
  surfaceConcernee : number;
  loyer : number;
  periode : string;
  statut: boolean;
  created_at: string;
  updated_at: string;
}

export interface ListRevenuExploitations {
  data: {
    projets: RevenuExploitation[];
    total: number;
    page: string;
    per_page: number;
    total_pages: string;
  };
  message: string;
  success: boolean;
}

export class RevenuExploitationModel {
  idProjet: number;
  idRevenu : number;
  idTypeRevenu : number;
  surfaceConcernee : number;
  loyer : number;
  periode : string;
  statut: boolean;
  created_at: string;
  updated_at: string;

  constructor(data: RevenuExploitation) {
    this.idProjet = data.idProjet;
    this.idRevenu = data.idRevenu;
    this.idTypeRevenu = data.idTypeRevenu;
    this.surfaceConcernee = data.surfaceConcernee;
    this.loyer = data.loyer;
    this.periode = data.periode;
    this.statut = data.statut;
    this.created_at = data.created_at;
    this.updated_at = data.updated_at;
  }

  /**
   * Convertit l'objet Projet en dictionnaire (équivalent de to_dict() en Python)
   */
  toDict(): RevenuExploitationResponse {
    return {
      idProjet: this.idProjet,
      idRevenu: this.idRevenu,
      idTypeRevenu: this.idTypeRevenu,
      surfaceConcernee: this.surfaceConcernee,
      loyer: this.loyer,
      periode: this.periode,
      statut: this.statut,
      created_at: this.created_at,
      updated_at: this.updated_at
    };
  }

  /**
   * Retourne le nom complet de le Projet
   */
  getFullName(): string {
    return `${this.idRevenu}`;
  }

  /**
   * Vérifie si le Projet est actif
   */
  isActive(): boolean {
    return this.statut;
  }

  /**
   * Désactive e Projet (soft delete)
   */
  softDelete(): void {
    this.statut = false;
    this.updated_at = new Date().toISOString();
  }

  /**
   * Met à jour les informations de e Projet
   */
  updateInfo(updateData: Partial<RevenuExploitationUpdate>): void {
    if (updateData.idRevenu !== undefined) this.idRevenu = updateData.idRevenu;
    if (updateData.idTypeRevenu !== undefined) this.idTypeRevenu = updateData.idTypeRevenu;
    if (updateData.surfaceConcernee !== undefined) this.surfaceConcernee = updateData.surfaceConcernee;
    if (updateData.loyer !== undefined) this.loyer = updateData.loyer;
    if (updateData.periode !== undefined) this.periode = updateData.periode;
    if (updateData.statut !== undefined) this.statut = updateData.statut;
    this.updated_at = new Date().toISOString();
  }

  /**
   * Valide les données de e Projet
   */
  isValidate(): { isValid: boolean; errors: string[] } {
    const errors: string[] = [];
    return {
      isValid: errors.length === 0,
      errors
    };
  }

  /**
   * Crée un nouvel Projet à partir des données de création
   */
  static fromCreateData(data: RevenuExploitationCreate): RevenuExploitationModel {
    const now = new Date().toISOString();
    return new RevenuExploitationModel({
      idRevenu: 0,
      idProjet: data.idProjet, // Sera défini par la base de données
      idTypeRevenu: data.idTypeRevenu,
      surfaceConcernee: data.surfaceConcernee,
      loyer: data.loyer,
      periode: data.periode,
      statut: data.statut ?? true,
      created_at: now,
      updated_at: now
    });
  }

  /**
   * Crée un Projet à partir des données de réponse API
   */
  static fromResponse(data: RevenuExploitationResponse): RevenuExploitationModel {
    return new RevenuExploitationModel({
      idProjet: data.idProjet,
      idRevenu: data.idRevenu,
      idTypeRevenu: data.idTypeRevenu,
      surfaceConcernee: data.surfaceConcernee,
      loyer: data.loyer,
      periode: data.periode,
      statut: data.statut,
      created_at: data.created_at,
      updated_at: data.updated_at
    });
  }
}


/**
 * Constantes pour les statuts Projet
 */
export const REVENUEXPLOITATION_STATUS = {
  ACTIVE: true,
  INACTIVE: false
} as const;

export type RevenuExploitationStatus = typeof REVENUEXPLOITATION_STATUS[keyof typeof REVENUEXPLOITATION_STATUS];
