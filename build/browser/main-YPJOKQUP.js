import{a as I,d as N,e as M,h as R,i,k as S,q as p}from"./chunk-NKZL4UVF.js";import{B as u,Z as h,ba as d,ca as n,db as v,m as A,pc as f,qa as C,yb as D}from"./chunk-S4NM23YD.js";import"./chunk-CSTXWUWE.js";var m=class t{constructor(r,o){this.authService=r;this.router=o}intercept(r,o){let a=this.authService.getCurrentToken(),s=r;return a&&(s=r.clone({setHeaders:{Authorization:`Bearer ${a}`}})),o.handle(s).pipe(u(c=>(c.status===401&&(console.warn("Token expir\xE9 ou invalide, redirection vers la connexion"),this.authService.logout()),A(()=>c))))}static \u0275fac=function(o){return new(o||t)(d(p),d(i))};static \u0275prov=h({token:t,factory:t.\u0275fac})};var T=(t,r)=>{let o=n(p),a=n(i);return o.isAuthenticated()?!0:(a.navigate(["/login"]),!1)};var e=(t,r)=>{let o=n(p),a=n(i),s=o.getCurrentUserRole(),c=t.data?.roles??[];return o.isAuthenticated()?c.includes(s)?!0:(a.navigate(["/dashboard"]),!1):(a.navigate(["/login"]),!1)};var g=[{path:"login",loadComponent:()=>import("./chunk-2Z7RQBAA.js").then(t=>t.LoginComponent)},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"",loadComponent:()=>import("./chunk-BIDSB3QT.js").then(t=>t.LayoutComponent),canActivate:[T],children:[{path:"dashboard",loadComponent:()=>import("./chunk-UBUTV7NG.js").then(t=>t.DashboardComponent),canActivate:[e],data:{roles:["admin","standard","limite"]}},{path:"users",loadComponent:()=>import("./chunk-MCAHYZH2.js").then(t=>t.UsersComponent),canActivate:[e],data:{roles:["admin"]}},{path:"users/create",loadComponent:()=>import("./chunk-JWDMIUOT.js").then(t=>t.UsersCreateComponent),canActivate:[e],data:{roles:["admin"]}},{path:"users/edit",loadComponent:()=>import("./chunk-5ULLITZP.js").then(t=>t.UsersEditComponent),canActivate:[e],data:{roles:["admin"]}},{path:"projets",loadComponent:()=>import("./chunk-UTDGN56R.js").then(t=>t.ProjetsComponent),canActivate:[e],data:{roles:["admin","standard","limite"]}},{path:"projets/create",loadComponent:()=>import("./chunk-ODQB5A6M.js").then(t=>t.ProjetsAdd),canActivate:[e],data:{roles:["admin","standard","limite"]}},{path:"projets/edit",loadComponent:()=>import("./chunk-STTFPKVJ.js").then(t=>t.ProjetsEdit),canActivate:[e],data:{roles:["admin","standard","limite"]}},{path:"clients",loadComponent:()=>import("./chunk-U2RDILQL.js").then(t=>t.ClientsComponent),canActivate:[e],data:{roles:["admin","standard","limite"]}},{path:"clients/create",loadComponent:()=>import("./chunk-QA3HMZQT.js").then(t=>t.ClientsAdd),canActivate:[e],data:{roles:["admin","standard","limite"]}},{path:"clients/edit",loadComponent:()=>import("./chunk-GJETAJ3R.js").then(t=>t.ClientsEdit),canActivate:[e],data:{roles:["admin","standard","limite"]}},{path:"settings",loadComponent:()=>import("./chunk-47YTGTK4.js").then(t=>t.SettingsComponent),canActivate:[e],data:{roles:["admin","standard"]}},{path:"natures",loadComponent:()=>import("./chunk-QD4LDSBC.js").then(t=>t.Natures),canActivate:[e],data:{roles:["admin","standard"]}},{path:"natures/create",loadComponent:()=>import("./chunk-EH445Y4J.js").then(t=>t.NaturesAdd),canActivate:[e],data:{roles:["admin","standard"]}},{path:"natures/edit",loadComponent:()=>import("./chunk-GNCAIO7L.js").then(t=>t.NaturesEdit),canActivate:[e],data:{roles:["admin","standard"]}},{path:"sous-natures",loadComponent:()=>import("./chunk-5FICIQRZ.js").then(t=>t.SousNatures),canActivate:[e],data:{roles:["admin","standard"]}},{path:"sous-natures/create",loadComponent:()=>import("./chunk-OMFUTPC5.js").then(t=>t.SousNatureAdd),canActivate:[e],data:{roles:["admin","standard"]}},{path:"sous-natures/edit",loadComponent:()=>import("./chunk-V6BWPTPL.js").then(t=>t.SousNatureEdit),canActivate:[e],data:{roles:["admin","standard"]}},{path:"regle-calculs",loadComponent:()=>import("./chunk-A3VI7YXU.js").then(t=>t.RegleCalculs),canActivate:[e],data:{roles:["admin"]}},{path:"regle-calculs/create",loadComponent:()=>import("./chunk-AWXN4UJP.js").then(t=>t.RegleCalculsAdd),canActivate:[e],data:{roles:["admin"]}},{path:"regle-calculs/edit",loadComponent:()=>import("./chunk-W3MOPIS5.js").then(t=>t.RegleCalculsEdit),canActivate:[e],data:{roles:["admin"]}},{path:"indicateur-cle",loadComponent:()=>import("./chunk-XLDD4VTV.js").then(t=>t.FormuleBuilder),canActivate:[e],data:{roles:["admin"]}},{path:"indicateur-cle/create",loadComponent:()=>import("./chunk-NG4BDNT7.js").then(t=>t.FormuleBuilderAdd),canActivate:[e],data:{roles:["admin"]}},{path:"indicateur-cle/edit",loadComponent:()=>import("./chunk-XO5EUOFC.js").then(t=>t.FormuleBuilderEdit),canActivate:[e],data:{roles:["admin"]}},{path:"scenarios",loadComponent:()=>import("./chunk-TCIT74P2.js").then(t=>t.ScenariosComponent),canActivate:[e],data:{roles:["admin"]}},{path:"scenarios/create",loadComponent:()=>import("./chunk-4ICB3MQY.js").then(t=>t.ScenariosCreateComponent),canActivate:[e],data:{roles:["admin"]}},{path:"scenarios/edit/:id",loadComponent:()=>import("./chunk-GBMHDLTZ.js").then(t=>t.ScenariosEditComponent),canActivate:[e],data:{roles:["admin"]}},{path:"auth-test",loadComponent:()=>import("./chunk-5VFYKQT2.js").then(t=>t.AuthTestComponent),canActivate:[e],data:{roles:["admin","standard","limite"]}}]},{path:"**",redirectTo:"/dashboard"}];var E={providers:[C(),f({eventCoalescing:!0}),S(g),M(),{provide:N,useClass:m,multi:!0}]};var l=class t{title="SCIclient";static \u0275fac=function(o){return new(o||t)};static \u0275cmp=v({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(o,a){o&1&&D(0,"router-outlet")},dependencies:[R],encapsulation:2})};I(l,E).catch(t=>console.error(t));
