import{b as le}from"./chunk-C5B75LPH.js";import{a as se}from"./chunk-SE2LHW5U.js";import{b as ae}from"./chunk-BUFLK7LZ.js";import{b as Q,c as g,e as X,f as ee,j as te,l as ne,m as oe,v as re,x as ie}from"./chunk-LTEV2KH7.js";import{f as Y,g as J,h as Z,i as K,j as O,l as k,q as E}from"./chunk-NKZL4UVF.js";import{Ab as f,Bb as T,Fb as F,Hb as m,Ib as w,Oa as a,Pc as x,Qc as I,Rc as S,Ta as z,Ub as v,Vb as P,Wb as s,Wc as W,Xb as C,Yb as R,Yc as _,Za as u,Zb as q,db as M,ha as N,hc as B,ia as D,ib as b,kc as V,lc as G,v as j,vb as d,wb as o,xb as i,yb as c,z as H,zb as p}from"./chunk-S4NM23YD.js";import{a as L}from"./chunk-CSTXWUWE.js";function he(l,t){if(l&1){let e=F();o(0,"div",41),s(1),o(2,"button",42),m("click",function(){let r=N(e).$implicit,h=w();return D(h.closeToast(r))}),s(3,"\xD7"),i()()}if(l&2){let e=t.$implicit;v("show",e.visible),d("ngClass",e.type),a(),R(" ",e.message," ")}}function ge(l,t){if(l&1){let e=F();o(0,"div",43)(1,"a",44),m("click",function(r){let h=N(e).$implicit;return w().onMenuClick(h.nameClick||""),D(r.preventDefault())}),c(2,"i"),s(3),i()()}if(l&2){let e=t.$implicit;a(2),P(e.iconClasses),a(),R(" ",e.name," ")}}function be(l,t){if(l&1&&(o(0,"span"),s(1),i()),l&2){let e=t.ngIf;a(),q("",e.prenom," ",e.nom)}}function ve(l,t){l&1&&(o(0,"small",45),s(1," \u26A0\uFE0F Les mots de passe ne correspondent pas. "),i())}var y=class l{constructor(t,e,n,r){this.fb=t;this.authService=e;this.route=n;this.userService=r;this.currentUser$=this.authService.currentUser$,this.passwordForm=this.fb.group({oldPassword:["",g.required],newPassword:["",g.required],confirmPassword:["",g.required]})}structuredMenu=[];currentUser$;menuClicked=new z;logout(){this.authService.logout()}onMenuClick(t){console.log("\u{1F5B1}\uFE0F Header: Clic d\xE9tect\xE9 sur le menu:",t),this.menuClicked.emit(t),console.log("\u{1F4E4} Header: Event menuClicked \xE9mis vers LayoutComponent")}passwordForm;showOld=!1;showNew=!1;showConfirm=!1;strength="";strengthLabel="";serverErrors=[];toasts=[];showToast(t,e="success"){let n={message:t,type:e,visible:!1};this.toasts.push(n),requestAnimationFrame(()=>{n.visible=!0}),n.timeout=setTimeout(()=>this.closeToast(n),3e3)}closeToast(t){clearTimeout(t.timeout),t.visible=!1,setTimeout(()=>{this.toasts=this.toasts.filter(e=>e!==t)},400)}ngOnInit(){this.route.queryParams.subscribe(t=>{t.changePassword==="true"&&this.openPasswordModal()})}get passwordMismatch(){let t=this.passwordForm.value.newPassword,e=this.passwordForm.value.confirmPassword;return t&&e&&t!==e}checkStrength(){let t=this.passwordForm.value.newPassword||"",e=/[a-zA-Z]/.test(t),n=/[0-9]/.test(t),r=/[@$!%*?&]/.test(t);t.length>=8&&e&&n&&r?(this.strength="strong",this.strengthLabel="Fort"):t.length>=6&&(e&&n||e&&r)?(this.strength="medium",this.strengthLabel="Moyen"):(this.strength="weak",this.strengthLabel="Faible")}submitPassword(){if(this.passwordForm.invalid||this.passwordMismatch)return;let t={idUtilisateur:1,ancienMotDePasse:this.passwordForm.value.oldPassword,nouveauMotDePasse:this.passwordForm.value.newPassword};this.userService.updatePassword(t).subscribe({next:e=>{console.log("result = ",e),e?(this.passwordForm=this.fb.group({oldPassword:["",g.required],newPassword:["",g.required],confirmPassword:["",g.required]}),this.showToast(["Mot de passe modifi\xE9 avec success"],"success"),$("#passwordModal").modal("hide")):this.showToast(["Une erreur est survenue lors de l'enregistrement"],"error")},error:e=>{this.serverErrors.push(e.error?.message||"Erreur inconnue."),this.showToast(this.serverErrors,"error")}})}closePasswordModal(){$("#passwordModal").modal("hide")}openPasswordModal(){this.passwordForm=this.fb.group({oldPassword:["",g.required],newPassword:["",g.required],confirmPassword:["",g.required]}),$("#passwordModal").modal("show")}static \u0275fac=function(e){return new(e||l)(u(re),u(E),u(J),u(se))};static \u0275cmp=M({type:l,selectors:[["app-header"]],inputs:{structuredMenu:"structuredMenu"},outputs:{menuClicked:"menuClicked"},decls:68,vars:26,consts:[[1,"toast-container"],["class","toast",3,"ngClass","show",4,"ngFor","ngForOf"],[1,"main-header","navbar","navbar-expand","custom-navbar"],["routerLink","/dashboard",1,"navbar-brand","brand-zone"],["src","assets/img/AdminLTELogo.png","alt","Logo",1,"brand-image"],[1,"brand-text"],[1,"navbar-nav","ml-auto","menu-zone"],["class","nav-item",4,"ngFor","ngForOf"],[1,"navbar-nav","user-zone"],[1,"nav-item","dropdown","user-dropdown"],["href","#","role","button","data-toggle","dropdown",1,"nav-link","user-toggle"],["src","src/assets/img/user2-160x160.png","alt","User Avatar",1,"avatar"],[4,"ngIf"],[1,"dropdown-menu","dropdown-menu-right","user-dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"fas","fa-lock"],["routerLink","/auth-test",1,"dropdown-item"],[1,"fas","fa-shield-alt"],[1,"dropdown-divider"],[1,"dropdown-item","logout",3,"click"],[1,"fas","fa-sign-out-alt"],["id","passwordModal","tabindex","-1","role","dialog",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","bg-primary"],[1,"modal-title"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],[1,"input-group"],["formControlName","oldPassword",1,"form-control",3,"type"],[1,"input-group-append"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas"],["formControlName","newPassword",1,"form-control",3,"input","type"],[1,"strength-bar"],["formControlName","confirmPassword",1,"form-control",3,"type"],["class","text-danger",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"toast",3,"ngClass"],[1,"close-btn",3,"click"],[1,"nav-item"],[1,"nav-link","nav-tab",3,"click"],[1,"text-danger"]],template:function(e,n){e&1&&(o(0,"div",0),b(1,he,4,4,"div",1),i(),o(2,"nav",2)(3,"a",3),c(4,"img",4),o(5,"span",5),s(6,"SCI Mermo"),i()(),o(7,"div",6),b(8,ge,4,3,"div",7),i(),o(9,"ul",8)(10,"li",9)(11,"a",10),c(12,"img",11),b(13,be,2,2,"span",12),V(14,"async"),i(),o(15,"div",13)(16,"a",14),m("click",function(){return n.openPasswordModal()}),c(17,"i",15),s(18," Changer le mot de passe "),i(),o(19,"a",16),c(20,"i",17),s(21," Profil "),i(),c(22,"div",18),o(23,"a",19),m("click",function(){return n.logout()}),c(24,"i",20),s(25," D\xE9connexion "),i()()()()(),o(26,"div",21)(27,"div",22)(28,"div",23)(29,"div",24)(30,"h5",25),s(31,"Modifier votre mot de passe"),i()(),o(32,"div",26)(33,"form",27)(34,"div",28)(35,"label"),s(36,"Ancien mot de passe"),i(),o(37,"div",29),c(38,"input",30),o(39,"div",31)(40,"button",32),m("click",function(){return n.showOld=!n.showOld}),c(41,"i",33),i()()()(),o(42,"div",28)(43,"label"),s(44,"Nouveau mot de passe"),i(),o(45,"div",29)(46,"input",34),m("input",function(){return n.checkStrength()}),i(),o(47,"div",31)(48,"button",32),m("click",function(){return n.showNew=!n.showNew}),c(49,"i",33),i()()(),o(50,"div",35),c(51,"div"),i(),o(52,"small"),s(53),i()(),o(54,"div",28)(55,"label"),s(56,"Confirmer le mot de passe"),i(),o(57,"div",29),c(58,"input",36),o(59,"div",31)(60,"button",32),m("click",function(){return n.showConfirm=!n.showConfirm}),c(61,"i",33),i()()(),b(62,ve,2,0,"small",37),i()()(),o(63,"div",38)(64,"button",39),m("click",function(){return n.closePasswordModal()}),s(65,"Annuler"),i(),o(66,"button",40),m("click",function(){return n.submitPassword()}),s(67," Enregistrer "),i()()()()()),e&2&&(a(),d("ngForOf",n.toasts),a(7),d("ngForOf",n.structuredMenu),a(5),d("ngIf",G(14,24,n.currentUser$)),a(20),d("formGroup",n.passwordForm),a(5),d("type",n.showOld?"text":"password"),a(3),v("fa-eye",!n.showOld)("fa-eye-slash",n.showOld),a(5),d("type",n.showNew?"text":"password"),a(3),v("fa-eye",!n.showNew)("fa-eye-slash",n.showNew),a(2),P(n.strength),a(2),C(n.strengthLabel),a(5),d("type",n.showConfirm?"text":"password"),a(3),v("fa-eye",!n.showConfirm)("fa-eye-slash",n.showConfirm),a(),d("ngIf",n.passwordMismatch),a(4),d("disabled",n.passwordForm.invalid||n.passwordMismatch))},dependencies:[_,x,I,S,ie,te,Q,X,ee,ne,oe,k,O,W],styles:['.custom-navbar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#71abee,#4725db);color:#fff;height:60px;padding:0 20px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(255,255,255,.2);box-shadow:0 4px 12px #0000001a}.brand-zone[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.brand-text[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#fff!important}.nav-tab[_ngcontent-%COMP%]{color:#fff!important;font-weight:500;font-size:15px;padding:8px 14px;border-radius:6px;position:relative;transition:all .25s ease}.nav-tab[_ngcontent-%COMP%]:hover{background:#ffffff26;box-shadow:0 2px 6px #00000026}.nav-tab[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:20%;width:0;height:3px;background:#ffeb3b;transition:width .25s ease;border-radius:50px}.nav-tab[_ngcontent-%COMP%]:hover:after{width:60%}.user-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#fff!important;cursor:pointer}.avatar[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;border:1px solid rgba(255,255,255,.5)}.user-dropdown-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .25s ease;border-radius:6px;background:#fff;color:#333;box-shadow:0 6px 18px #00000026}.user-dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;text-align:center}.logout[_ngcontent-%COMP%]{color:#d63031!important;font-weight:600}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}.nav-link[_ngcontent-%COMP%], .dropdown-item[_ngcontent-%COMP%]{cursor:pointer}.toast-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;display:flex;flex-direction:column;gap:10px;z-index:9999}.toast[_ngcontent-%COMP%]{min-width:220px;padding:12px 16px;border-radius:6px;color:#fff;box-shadow:0 4px 12px #00000040;font-size:14px;display:flex;justify-content:space-between;align-items:center;opacity:0;transform:translate(100%);transition:transform .4s ease,opacity .4s ease}.toast.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.toast.success[_ngcontent-%COMP%]{background-color:#4caf50}.toast.error[_ngcontent-%COMP%]{background-color:#f44336}.toast[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:16px;line-height:1;cursor:pointer}.strength-bar[_ngcontent-%COMP%]{height:6px;width:100%;background-color:#e0e0e0;border-radius:3px;margin-top:5px;margin-bottom:2px;overflow:hidden}.strength-bar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:100%;width:100%;transition:width .3s ease;border-radius:3px}.strength-bar[_ngcontent-%COMP%]   .weak[_ngcontent-%COMP%]{background-color:#dc3545;width:33%}.strength-bar[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%]{background-color:#ffc107;width:66%}.strength-bar[_ngcontent-%COMP%]   .strong[_ngcontent-%COMP%]{background-color:#28a745;width:100%}.strength-bar[_ngcontent-%COMP%] + small[_ngcontent-%COMP%]{display:block;font-weight:500;margin-top:2px;color:#6c757d}.text-danger[_ngcontent-%COMP%]{font-size:.85rem;margin-top:2px;display:block}']})};var A=class l{constructor(t,e){this.projetsServices=t;this.clientService=e}nbProjets=0;nbClients=0;ngOnInit(){this.loadNumber()}loadNumber(){j({projets:this.projetsServices.listProjets(0,10),clients:this.clientService.listClients(1,10)}).subscribe({next:({projets:t,clients:e})=>{t&&t.success&&t.data&&e&&e.success&&e.data?(this.nbProjets=t.data.total,this.nbClients=e.data.total):(this.nbClients=0,this.nbProjets=0)},error:()=>{}})}static \u0275fac=function(e){return new(e||l)(u(ae),u(le))};static \u0275cmp=M({type:l,selectors:[["app-footer"]],decls:32,vars:2,consts:[[1,"main-footer"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-4","footer-left"],["href","/dashboard"],[1,"col-md-4","footer-center","d-flex","justify-content-center"],[1,"kpi-card"],[1,"kpi-number"],[1,"kpi-label"],[1,"col-md-4","footer-right","text-md-end","mt-3","mt-md-0"],[1,"version-info"],[1,"fas","fa-code-branch"],[1,"separator"],[1,"powered-by"],[1,"fas","fa-heart"]],template:function(e,n){e&1&&(p(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"strong"),s(5,"\xA9 2025 "),p(6,"a",4),s(7,"SCI Client"),f()(),p(8,"span"),s(9,"Tous droits r\xE9serv\xE9s."),f()(),p(10,"div",5)(11,"div",6)(12,"span",7),s(13),f(),p(14,"span",8),s(15,"Projets"),f()(),p(16,"div",6)(17,"span",7),s(18),f(),p(19,"span",8),s(20,"Clients"),f()()(),p(21,"div",9)(22,"span",10),T(23,"i",11),p(24,"b"),s(25,"Version"),f(),s(26," 1.0.0"),f(),p(27,"span",12),s(28,"|"),f(),p(29,"span",13),T(30,"i",14),s(31," Powered by Angular"),f()()()()()),e&2&&(a(13),C(n.nbProjets),a(5),C(n.nbClients))},dependencies:[_],styles:['.main-footer[_ngcontent-%COMP%]{background:linear-gradient(90deg,#71abee,#4725db);color:#fff;padding:8px 15px;font-size:13px;border-top:1px solid rgba(255,255,255,.2);box-shadow:0 -4px 10px #0000001a;position:relative;overflow:hidden}.main-footer[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-50%;width:200%;height:100%;background:#ffffff0d;transform:skew(-20deg);pointer-events:none;animation:_ngcontent-%COMP%_gloss 4s infinite linear}@keyframes _ngcontent-%COMP%_gloss{0%{left:-50%}50%{left:100%}to{left:-50%}}.footer-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffeb3b;font-weight:600;transition:color .3s ease}.footer-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:8px;font-size:14px;transition:transform .3s ease,color .3s ease}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.15);color:#fff}.footer-center[_ngcontent-%COMP%]{gap:8px}.kpi-card[_ngcontent-%COMP%]{background:#ffffff26;padding:3px 8px;border-radius:6px;text-align:center;min-width:50px;transition:all .3s ease;cursor:default}.kpi-card[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px) scale(1.03)}.kpi-number[_ngcontent-%COMP%]{font-weight:700;font-size:16px;display:block}.kpi-label[_ngcontent-%COMP%]{font-size:11px;display:block;margin-top:1px;text-transform:uppercase;letter-spacing:.4px;opacity:.8}.footer-right[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 6px;color:#ffffff80}.footer-right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .footer-left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:3px;color:#ffeb3b;transition:transform .3s ease,color .3s ease}.footer-right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .footer-left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{transform:rotate(20deg) scale(1.15);color:#fff}@media (max-width: 768px){.footer-left[_ngcontent-%COMP%], .footer-center[_ngcontent-%COMP%], .footer-right[_ngcontent-%COMP%]{justify-content:center!important;margin:3px 0;text-align:center}.footer-center[_ngcontent-%COMP%]{flex-wrap:wrap;gap:6px}.footer-right[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{display:none}}']})};var U=[{name:"Dashboard",nameClick:"dashboard",iconClasses:"fas fa-tachometer-alt mr-1",path:["/dashboard"],roles:["admin","standard","limite"]},{name:"Utilisateurs",nameClick:"users",iconClasses:"fas fa-users mr-1",path:["/users"],roles:["admin"],children:[{name:"Liste des utilisateurs",iconClasses:"fas fa-list",path:["/users"],roles:["admin"]},{name:"Cr\xE9er utilisateur",iconClasses:"fas fa-user-plus",path:["/users/create"],roles:["admin"]},{name:"Modifier utilisateur",iconClasses:"fas fa-user-edit",path:["/users/edit"],roles:["admin"]}]},{name:"Clients",nameClick:"clients",iconClasses:"fas fa-user-tie mr-1",path:["/clients"],roles:["admin","standard","limite"],children:[{name:"Liste des clients",iconClasses:"fas fa-list",path:["/clients"],roles:["admin","standard","limite"]},{name:"Cr\xE9er client",iconClasses:"fas fa-plus",path:["/clients/create"],roles:["admin","standard","limite"]},{name:"Modifier client",iconClasses:"fas fa-edit",path:["/clients/edit"],roles:["admin","standard","limite"]}]},{name:"Projets",nameClick:"projets",iconClasses:"fas fa-project-diagram mr-1",path:["/projets"],roles:["admin","standard","limite"],children:[{name:"Liste des projets",iconClasses:"fas fa-list",path:["/projets"],roles:["admin","standard","limite"]},{name:"Cr\xE9er projet",iconClasses:"fas fa-plus",path:["/projets/create"],roles:["admin","standard","limite"]},{name:"Modifier projet",iconClasses:"fas fa-edit",path:["/projets/edit"],roles:["admin","standard","limite"]}]},{name:"Param\xE8tres",nameClick:"settings",iconClasses:"fas fa-cog mr-1",path:["/natures","/sous-natures","/regle-calculs","/indicateur-cle","/scenarios","/settings"],roles:["admin","standard"],children:[{name:"Nature",iconClasses:"fas fa-sliders-h",path:["/natures"],roles:["admin","standard"]},{name:"Sous-Nature",iconClasses:"fas fa-sliders-h",path:["/sous-natures"],roles:["admin","standard"]},{name:"Regles-Calculs",iconClasses:"fas fa-sliders-h",path:["/regle-calculs"],roles:["admin"]},{name:"Indicateur-Cl\xE9s",iconClasses:"fas fa-sliders-h",path:["/indicateur-cle"],roles:["admin"]},{name:"Sc\xE9narios",iconClasses:"fas fa-chart-line",path:["/scenarios"],roles:["admin"]},{name:"G\xE9n\xE9ral",iconClasses:"fas fa-sliders-h",path:["/settings"],roles:["admin"]}]}];var Ce=()=>[];function Me(l,t){if(l&1&&(o(0,"a",13),c(1,"i"),o(2,"span"),s(3),i()()),l&2){let e=t.$implicit,n=w(2);v("active",n.isSubmenuItemActive(e.path||B(6,Ce))),d("routerLink",e.path),a(),P(e.iconClasses),a(2),C(e.name)}}function we(l,t){if(l&1&&(o(0,"div",9)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",10)(5,"div",11),b(6,Me,4,7,"a",12),i()()()()()()),l&2){let e=w();a(6),d("ngForOf",e.getSubmenuItems())}}var me=class l{constructor(t,e){this.router=t;this.userService=e}currentUrl="";activeMenu="";showRibbon=!1;contentClass="";filteredMenu=[];ngOnInit(){this.filteredMenu=this.filterMenuByRole(U,this.userService.getCurrentUserRole()),this.currentUrl=this.router.url,this.updatePageInfo(),this.router.events.pipe(H(t=>t instanceof Y)).subscribe(t=>{this.currentUrl=t.url,this.updatePageInfo()})}showSubmenuRibbon1(){let t=[];return this.filteredMenu.forEach(e=>{e.path&&t.push(...e.path.filter(n=>n!=="/dashboard"))}),this.currentUrl!=="/dashboard"&&t.some(e=>this.currentUrl.startsWith(e))}showSubmenuRibbon(){let t=[],e;for(let r of U)r.path&&r.path?.length!=0&&t.push(...r.path.filter(h=>h!=="/dashboard"));let n=this.currentUrl!=="/dashboard"&&t.some(r=>this.currentUrl.startsWith(r));return console.log("\u{1F3AF} showSubmenuRibbon() appel\xE9e - URL:",this.currentUrl,"R\xE9sultat:",n),n}filterMenuByRole(t,e){return t.filter(n=>n.roles?.includes(e)).map(n=>{let r=L({},n);return r.children&&(r.children=this.filterMenuByRole(r.children,e)),r})}updatePageInfo(){if(this.currentUrl==="/dashboard"){this.activeMenu="dashboard",this.showRibbon=!1;return}let t=this.filteredMenu.find(e=>e.path?.some(n=>this.currentUrl.startsWith(n)));this.activeMenu=t?.nameClick??"",this.showRibbon=!!t,this.contentClass=this.getContentClass()}getContentClass(){let t="";return this.activeMenu&&(t+=`${this.activeMenu}-content`),this.showRibbon&&(t+=t?" show-ribbon":"show-ribbon"),t}getSubmenuItems(){let t=this.filteredMenu.find(e=>e.path?.some(n=>this.currentUrl.startsWith(n)));return t?.children?t.children.filter(e=>e.path&&e.path.length>0).map(e=>({name:e.name,path:e.path,iconClasses:e.iconClasses})):[]}isSubmenuItemActive(t){return t?t.some(e=>this.currentUrl.startsWith(e)):!1}onMenuClick(t){this.activeMenu=t,this.showRibbon=t!=="dashboard";let e=this.filteredMenu.find(n=>n.nameClick===t);e?.path?.length?this.router.navigate([e.path[0]]):this.router.navigate(["/dashboard"])}getBreadcrumbItems(){let t=[];for(let e of this.filteredMenu){let n=e.path?.[0];if(n&&this.currentUrl.startsWith(n)){t.push({name:e.name,path:n,active:!1});let r=e.children?.find(h=>this.currentUrl.startsWith(h.path?.[0]||""));r?t.push({name:r.name,path:r.path?.[0],active:!0}):t[t.length-1].active=!0;break}}return t}static \u0275fac=function(e){return new(e||l)(u(K),u(E))};static \u0275cmp=M({type:l,selectors:[["app-layout"]],decls:11,vars:3,consts:[[1,"wrapper"],[1,"content-wrapper"],[3,"menuClicked","structuredMenu"],["class","submenu-ribbon",4,"ngIf"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"content-container",3,"ngClass"],[1,"submenu-ribbon"],[1,"submenu-container"],[1,"submenu-items"],["class","submenu-item",3,"routerLink","active",4,"ngFor","ngForOf"],[1,"submenu-item",3,"routerLink"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"app-header",2),m("menuClicked",function(h){return n.onMenuClick(h)}),i(),b(3,we,7,1,"div",3),o(4,"section",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),c(9,"router-outlet"),i()()()()(),c(10,"app-footer"),i()()),e&2&&(a(2),d("structuredMenu",n.filteredMenu),a(),d("ngIf",n.showRibbon),a(5),d("ngClass",n.getContentClass()))},dependencies:[_,x,I,S,Z,k,O,y,A],encapsulation:2})};export{me as LayoutComponent};
