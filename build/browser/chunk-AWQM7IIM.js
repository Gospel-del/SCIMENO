import{y as p}from"./chunk-LTEV2KH7.js";import{c as S,q as h}from"./chunk-NKZL4UVF.js";import{B as u,Z as l,ba as n,g as d,l as s,p as i}from"./chunk-S4NM23YD.js";var a=class o{idSousNature;idNature;nomSousNature;detailSousNature;status;created_at;updated_at;constructor(e){this.idSousNature=e.idSousNature,this.idNature=e.idNature,this.nomSousNature=e.nomSousNature,this.detailSousNature=e.detailSousNature,this.status=e.status,this.created_at=e.created_at,this.updated_at=e.updated_at}toDict(){return{idSousNature:this.idSousNature,idNature:this.idNature,nomSousNature:this.nomSousNature,detailSousNature:this.detailSousNature,status:this.status,created_at:this.created_at,updated_at:this.updated_at}}getFullName(){return`${this.nomSousNature}`}isActive(){return this.status}softDelete(){this.status=!1,this.updated_at=new Date().toISOString()}updateInfo(e){e.idNature!==void 0&&(this.idNature=e.idNature),e.nomSousNature!==void 0&&(this.nomSousNature=e.nomSousNature),e.status!==void 0&&(this.status=e.status),e.detailSousNature!==void 0&&(this.detailSousNature=e.detailSousNature),this.updated_at=new Date().toISOString()}isValidate(){let e=[];return(!this.nomSousNature||this.nomSousNature.trim().length===0)&&e.push("Le nom est requis"),this.idNature||e.push("La nature est requise"),{isValid:e.length===0,errors:e}}static fromCreateData(e){let t=new Date().toISOString();return new o({idSousNature:0,idNature:e.idNature,nomSousNature:e.nomSousNature,detailSousNature:e.detailSousNature,status:e.status??!0,created_at:t,updated_at:t})}static fromResponse(e){return new o({idSousNature:e.idSousNature,idNature:e.idNature,nomSousNature:e.nomSousNature,detailSousNature:e.detailSousNature,status:e.status,created_at:e.created_at,updated_at:e.updated_at})}};var N=class o{constructor(e,t,r){this.http=e;this.authService=t;this.authHelper=r}apiUrl="http://localhost:5000/api/sous_nature";currentUserSubject=new d(null);currentUser$=this.currentUserSubject.asObservable();_sousNatureToEdit=null;setSousNatureToEdit(e){this._sousNatureToEdit=e}getSousNatureToEdit(){return this._sousNatureToEdit}clearSousNatureToEdit(){this._sousNatureToEdit=null}getAuthHeaders(){return this.authHelper.getAuthHeaders("SousNaturesService")}createSousNature(e){return this.getAuthHeaders()?(console.log("ce que tu a",this.getAuthHeaders()),this.http.post(`${this.apiUrl}/creer`,e,this.getAuthHeaders()).pipe(i(t=>{if(t.success&&t.data)return a.fromResponse(t.data);throw new Error(t.message||"Erreur lors de la cr\xE9ation de la sous nature")}),u(t=>this.handleError(t,void 0)))):s(null)}updateSousNature(e){return this.getAuthHeaders()?this.http.post(`${this.apiUrl}/modifier`,e,this.getAuthHeaders()).pipe(i(t=>{if(t.success&&t.data)return a.fromResponse(t.data);throw new Error(t.message||"Erreur lors de la modification de la sous nature")}),u(t=>this.handleError(t,void 0))):s(null)}findById(e){if(!this.getAuthHeaders())return s(null);let t={idSousNature:e};return this.http.post(`${this.apiUrl}/obtenir`,t,this.getAuthHeaders()).pipe(i(r=>{if(r.success&&r.data)return a.fromResponse(r.data);throw new Error(r.message||"Sous nature non trouv\xE9")}),u(r=>this.handleError(r,null)))}deleteSousNature(e){if(!this.getAuthHeaders())return s(null);let t={idNature:e.idNature};return this.http.post(`${this.apiUrl}/supprimer`,t,this.getAuthHeaders()).pipe(u(r=>this.handleError(r,void 0)))}listSousNatures(e,t,r,c=!1){if(!this.getAuthHeaders())return s(null);let m={page:e,per_page:t,typeNature:r,actifOnly:c};return this.http.post(`${this.apiUrl}/lister`,m,this.getAuthHeaders()).pipe(u(g=>this.handleError(g,null)))}restoreNature(e){return this.getAuthHeaders()?this.http.post(`${this.apiUrl}/restaurer`,{idSousNature:e},this.getAuthHeaders()).pipe(i(t=>{if(t.success&&t.data)return a.fromResponse(t.data);throw new Error(t.message||"Erreur lors de la restauration de la sous nature")}),u(t=>this.handleError(t,null))):s(null)}searchSousNature(e){return this.getAuthHeaders()?this.http.post(`${this.apiUrl}/rechercher`,{terme_recherche:e},this.getAuthHeaders()).pipe(u(t=>this.handleError(t,null))):s(null)}handleError(e,t){return console.table(e),e.error&&e.error.message&&console.error("Message d'erreur:",e.error.message),e.status===401&&console.warn("Token expir\xE9 ou invalide"),s(t)}static \u0275fac=function(t){return new(t||o)(n(S),n(h),n(p))};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{a,N as b};
