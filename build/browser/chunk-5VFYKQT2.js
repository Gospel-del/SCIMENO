import{n as S,o as k,p as _,q as E}from"./chunk-NKZL4UVF.js";import{Ib as u,Oa as a,Pc as x,Rc as b,Ub as h,Wb as n,Yb as s,Yc as C,Za as m,Zb as v,db as p,ib as f,jc as g,vb as d,wb as r,xb as t,yb as l}from"./chunk-S4NM23YD.js";import"./chunk-CSTXWUWE.js";var M=(o,i)=>({"alert-success":o,"alert-danger":i}),O=(o,i)=>({"badge-success":o,"badge-danger":i});function w(o,i){if(o&1&&(r(0,"div",12)(1,"div",13)(2,"h5",14),l(3,"i",15),n(4," Utilisateur actuel"),t(),r(5,"ul",16)(6,"li",17)(7,"strong"),n(8,"Nom :"),t(),n(9),t(),r(10,"li",17)(11,"strong"),n(12,"Email :"),t(),n(13),t(),r(14,"li",17)(15,"strong"),n(16,"Fonction :"),t(),n(17),t(),r(18,"li",17)(19,"strong"),n(20,"Statut :"),t(),r(21,"span",18),n(22),t()()()()()),o&2){let e=u();a(9),v(" ",e.currentUser.prenom," ",e.currentUser.nom),a(4),s(" ",e.currentUser.email),a(4),s(" ",e.fonctionMap[e.currentUser.fonction||""]),a(4),h("badge-success",e.currentUser.statut)("badge-secondary",!e.currentUser.statut),a(),s(" ",e.currentUser.statut?"Actif":"Inactif"," ")}}function A(o,i){if(o&1&&(r(0,"div",12)(1,"div",19)(2,"h5",14),l(3,"i",20),n(4," Informations du token"),t(),r(5,"ul",16)(6,"li",17)(7,"strong"),n(8,"Email :"),t(),n(9),t(),r(10,"li",17)(11,"strong"),n(12,"\xC9mis le :"),t(),n(13),t(),r(14,"li",17)(15,"strong"),n(16,"Expire le :"),t(),n(17),t()()()()),o&2){let e=u();a(9),s(" ",e.tokenInfo.email),a(4),s(" ",e.formatDate(e.tokenInfo.iat)),a(4),s(" ",e.formatDate(e.tokenInfo.exp))}}var I=class o{constructor(i,e){this.authService=i;this.jwtService=e}isAuthenticated=!1;currentUser=null;tokenInfo=null;fonctionMap={};fonctionUserList=Object.values(S).map(i=>({key:i,label:k[i]}));ngOnInit(){this.checkAuthStatus(),this.fonctionMap=this.fonctionUserList.reduce((i,e)=>(i[e.key]=e.label,i),{})}checkAuthStatus(){this.isAuthenticated=this.authService.isAuthenticated(),this.currentUser=this.authService.getCurrentUser();let i=this.authService.getCurrentToken();i&&(this.tokenInfo=this.jwtService.getUserFromToken(i))}formatDate(i){return new Date(i*1e3).toLocaleString()}static \u0275fac=function(e){return new(e||o)(m(E),m(_))};static \u0275cmp=p({type:o,selectors:[["app-auth-test"]],decls:20,vars:11,consts:[[1,"container-fluid","py-4"],[1,"row"],[1,"col-12"],[1,"card","shadow-sm","border-0","rounded-lg"],[1,"card-header","bg-gradient-primary","text-white"],[1,"card-title","mb-0"],[1,"fas","fa-shield-alt","mr-2"],[1,"card-body"],[1,"mb-4"],[1,"alert",3,"ngClass"],[1,"badge",3,"ngClass"],["class","col-md-6",4,"ngIf"],[1,"col-md-6"],[1,"user-info","card","p-3","mb-3","shadow-sm","rounded-lg"],[1,"mb-3"],[1,"fas","fa-user","mr-2"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"badge"],[1,"token-info","card","p-3","mb-3","shadow-sm","rounded-lg"],[1,"fas","fa-key","mr-2"]],template:function(e,c){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),l(6,"i",6),n(7," Test d'authentification JWT "),t()(),r(8,"div",7)(9,"div",8)(10,"h5"),n(11,"\xC9tat de l'authentification :"),t(),r(12,"div",9)(13,"strong"),n(14,"Statut : "),t(),r(15,"span",10),n(16),t()()(),r(17,"div",1),f(18,w,23,9,"div",11)(19,A,18,3,"div",11),t()()()()()()),e&2&&(a(12),d("ngClass",g(5,M,c.isAuthenticated,!c.isAuthenticated)),a(3),d("ngClass",g(8,O,c.isAuthenticated,!c.isAuthenticated)),a(),s(" ",c.isAuthenticated?"Connect\xE9":"Non connect\xE9"," "),a(2),d("ngIf",c.currentUser),a(),d("ngIf",c.tokenInfo))},dependencies:[C,x,b],styles:[".kpi-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;display:flex;align-items:center}.kpi-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 25px #00000026}.kpi-icon[_ngcontent-%COMP%]{flex-shrink:0}.kpi-content[_ngcontent-%COMP%]{margin-left:15px}.kpi-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.kpi-label[_ngcontent-%COMP%]{font-size:.9rem;text-transform:uppercase;opacity:.85}.bg-gradient-info[_ngcontent-%COMP%]{background:linear-gradient(120deg,#36d1dc,#5b86e5)!important}.bg-gradient-success[_ngcontent-%COMP%]{background:linear-gradient(120deg,#1cc88a,#28a745)!important}.bg-gradient-warning[_ngcontent-%COMP%]{background:linear-gradient(120deg,#f6c23e,#f8a13f)!important}.bg-gradient-primary[_ngcontent-%COMP%]{background:linear-gradient(120deg,#4e73df,#1cc88a)!important}.bg-gradient-secondary[_ngcontent-%COMP%]{background:linear-gradient(120deg,#858796,#6c757d)!important}.card[_ngcontent-%COMP%]{border-radius:12px;transition:transform .25s ease,box-shadow .25s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000001f}.list-group-item[_ngcontent-%COMP%]{border:none;padding:8px 12px;font-size:.95rem}.badge[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;padding:.35em .6em}.badge-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}"]})};export{I as AuthTestComponent};
