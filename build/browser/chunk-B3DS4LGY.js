import{b as n}from"./chunk-TND3ERBF.js";import{y as m}from"./chunk-LTEV2KH7.js";import{c as S,q as d}from"./chunk-NKZL4UVF.js";import{B as i,Z as p,ba as c,l as s,p as u}from"./chunk-S4NM23YD.js";var b=class l{constructor(t,r,e){this.http=t;this.authService=r;this.authHelper=e}apiUrl="http://localhost:5000/api/scenario_sous_nature";createScenarioSousNature(t){let r=this.authHelper.getAuthHeadersWithCheck("ScenarioSousNatureService");return r?this.http.post(`${this.apiUrl}/creer`,t,r).pipe(u(e=>{if(e.success&&e.data)return n.fromResponse(e.data);throw new Error(e.message||"Erreur lors de la cr\xE9ation du lien")}),i(e=>this.handleError(e,null))):s(null)}listScenarioSousNatures(t=1,r=10,e,a){let o=this.authHelper.getAuthHeadersWithCheck("ScenarioSousNatureService");if(!o)return s(null);let h={page:t,per_page:r};return e&&(h.id_scenario=e),a&&(h.id_sous_nature=a),this.http.post(`${this.apiUrl}/lister`,h,o).pipe(i(f=>this.handleError(f,null)))}getScenarioSousNatureById(t){let r=this.authHelper.getAuthHeadersWithCheck("ScenarioSousNatureService");return r?this.http.post(`${this.apiUrl}/obtenir`,{id_scenario_sous_nature:t},r).pipe(u(e=>{if(e.success&&e.data)return n.fromResponse(e.data);throw new Error(e.message||"Lien non trouv\xE9")}),i(e=>this.handleError(e,null))):s(null)}getScenarioSousNatureByScenarioAndSousNature(t,r){let e=this.authHelper.getAuthHeadersWithCheck("ScenarioSousNatureService");return e?this.http.post(`${this.apiUrl}/obtenir_par_scenario_sous_nature`,{id_scenario:t,id_sous_nature:r},e).pipe(u(a=>{if(a.success&&a.data)return n.fromResponse(a.data);throw new Error(a.message||"Lien non trouv\xE9")}),i(a=>this.handleError(a,null))):s(null)}updateScenarioSousNature(t){let r=this.authHelper.getAuthHeadersWithCheck("ScenarioSousNatureService");return r?this.http.post(`${this.apiUrl}/modifier`,t,r).pipe(u(e=>{if(e.success&&e.data)return n.fromResponse(e.data);throw new Error(e.message||"Erreur lors de la modification du lien")}),i(e=>this.handleError(e,null))):s(null)}calculerValeur(t,r){let e=this.authHelper.getAuthHeadersWithCheck("ScenarioSousNatureService");if(!e)return s(null);let a={id_scenario_sous_nature:t};return r!==void 0&&(a.valeur_base=r),this.http.post(`${this.apiUrl}/calculer_valeur`,a,e).pipe(u(o=>{if(o.success&&o.data)return n.fromResponse(o.data);throw new Error(o.message||"Erreur lors du calcul")}),i(o=>this.handleError(o,null)))}deleteScenarioSousNature(t){let r=this.authHelper.getAuthHeadersWithCheck("ScenarioSousNatureService");return r?this.http.post(`${this.apiUrl}/supprimer`,{id_scenario_sous_nature:t},r).pipe(i(e=>this.handleError(e,null))):s(null)}deleteScenarioSousNatureByScenarioAndSousNature(t,r){let e=this.authHelper.getAuthHeadersWithCheck("ScenarioSousNatureService");return e?this.http.post(`${this.apiUrl}/supprimer_par_scenario_sous_nature`,{id_scenario:t,id_sous_nature:r},e).pipe(i(a=>this.handleError(a,null))):s(null)}handleError(t,r){return console.error("Erreur dans ScenarioSousNatureService:",t),t.error&&t.error.message&&console.error("Message d'erreur:",t.error.message),t.status===401&&console.warn("Token expir\xE9 ou invalide"),s(r)}static \u0275fac=function(r){return new(r||l)(c(S),c(d),c(m))};static \u0275prov=p({token:l,factory:l.\u0275fac,providedIn:"root"})};export{b as a};
