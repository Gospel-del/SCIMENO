import{y as c}from"./chunk-LTEV2KH7.js";import{c as h,q as N}from"./chunk-NKZL4UVF.js";import{B as i,Z as p,ba as l,g as d,l as s,p as o}from"./chunk-S4NM23YD.js";var E=(a=>(a.REV="Revenus d'exploitation",a.DEP="D\xE9penses d'exploitation annuelles",a.EMP="Emprunt sollicit\xE9",a.INV="Investissements pr\xE9visionnels",a.FDR="Fonds de roulement",a.FIN="Financement",a.TRE="Flux de tr\xE9sorerie actionnaires",a.DOC="Documents",a.IND="Indicateur cl\xE9s",a))(E||{});var u=class n{idNature;nomNature;typeNature;detailNature;status;created_at;updated_at;constructor(e){this.idNature=e.idNature,this.nomNature=e.nomNature,this.typeNature=e.typeNature,this.detailNature=e.detailNature,this.status=e.status,this.created_at=e.created_at,this.updated_at=e.updated_at}toDict(){return{idNature:this.idNature,nomNature:this.nomNature,typeNature:this.typeNature,detailNature:this.detailNature,status:this.status,created_at:this.created_at,updated_at:this.updated_at}}getFullName(){return`${this.nomNature}`}isActive(){return this.status}softDelete(){this.status=!1,this.updated_at=new Date().toISOString()}updateInfo(e){e.nomNature!==void 0&&(this.nomNature=e.nomNature),e.status!==void 0&&(this.status=e.status),e.detailNature!==void 0&&(this.detailNature=e.detailNature),e.typeNature!==void 0&&(this.typeNature=e.typeNature),this.updated_at=new Date().toISOString()}isValidate(){let e=[];return(!this.nomNature||this.nomNature.trim().length===0)&&e.push("Le nom est requis"),(!this.typeNature||this.typeNature.trim().length===0)&&e.push("Le type est requis"),{isValid:e.length===0,errors:e}}static fromCreateData(e){let t=new Date().toISOString();return new n({idNature:0,nomNature:e.nomNature,typeNature:e.typeNature,detailNature:e.detailNature,status:e.status??!0,created_at:t,updated_at:t})}static fromResponse(e){return new n({idNature:e.idNature,nomNature:e.nomNature,typeNature:e.typeNature,detailNature:e.detailNature,status:e.status,created_at:e.created_at,updated_at:e.updated_at})}};var m=class n{constructor(e,t,r){this.http=e;this.authService=t;this.authHelper=r}apiUrl="http://localhost:5000/api/base_nature";currentUserSubject=new d(null);currentUser$=this.currentUserSubject.asObservable();_natureToEdit=null;setNatureToEdit(e){this._natureToEdit=e}getNatureToEdit(){return this._natureToEdit}clearNatureToEdit(){this._natureToEdit=null}getAuthHeaders(){return this.authHelper.getAuthHeaders("NaturesService")}createNature(e){return this.getAuthHeaders()?this.http.post(`${this.apiUrl}/creer`,e,this.getAuthHeaders()).pipe(o(t=>{if(t.success&&t.data)return u.fromResponse(t.data);throw new Error(t.message||"Erreur lors de la cr\xE9ation de la nature")}),i(t=>this.handleError(t,void 0))):s(null)}updateNature(e){return this.getAuthHeaders()?this.http.post(`${this.apiUrl}/modifier`,e,this.getAuthHeaders()).pipe(o(t=>{if(t.success&&t.data)return u.fromResponse(t.data);throw new Error(t.message||"Erreur lors de la modification de la nature")}),i(t=>this.handleError(t,void 0))):s(null)}findById(e){if(!this.getAuthHeaders())return s(null);let t={idNature:e};return this.http.post(`${this.apiUrl}/obtenir`,t,this.getAuthHeaders()).pipe(o(r=>{if(r.success&&r.data)return u.fromResponse(r.data);throw new Error(r.message||"Nature non trouv\xE9")}),i(r=>this.handleError(r,null)))}deleteNature(e){if(!this.getAuthHeaders())return s(null);let t={idNature:e.idNature};return this.http.post(`${this.apiUrl}/supprimer`,t,this.getAuthHeaders()).pipe(i(r=>this.handleError(r,void 0)))}listNatures(e,t,r,g=!1){if(!this.getAuthHeaders())return s(null);let f={page:e,per_page:t,typeNature:r,actifOnly:g};return this.http.post(`${this.apiUrl}/lister`,f,this.getAuthHeaders()).pipe(i(b=>this.handleError(b,null)))}restoreNature(e){return this.getAuthHeaders()?this.http.post(`${this.apiUrl}/restaurer`,{idNature:e},this.getAuthHeaders()).pipe(o(t=>{if(t.success&&t.data)return u.fromResponse(t.data);throw new Error(t.message||"Erreur lors de la restauration de la nature")}),i(t=>this.handleError(t,null))):s(null)}searchNature(e){return this.getAuthHeaders()?this.http.post(`${this.apiUrl}/rechercher`,{terme_recherche:e},this.getAuthHeaders()).pipe(i(t=>this.handleError(t,null))):s(null)}handleError(e,t){return console.table(e),e.error&&e.error.message&&console.error("Message d'erreur:",e.error.message),e.status===401&&console.warn("Token expir\xE9 ou invalide"),s(t)}static \u0275fac=function(t){return new(t||n)(l(h),l(N),l(c))};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};export{E as a,u as b,m as c};
